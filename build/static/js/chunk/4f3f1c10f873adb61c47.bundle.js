(window.webpackJsonp=window.webpackJsonp||[]).push([[19,45],{NWAQ:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTldBUS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9tZXNzYWdlRGV0YWlsL2luZGV4LnNjc3M/ODYxNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///NWAQ\n")},"gO+N":function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("o0o1");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("yXPU");\n/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("lSNA");\n/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("J4zp");\n/* harmony import */ var _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("q1tI");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("Wcq6");\n/* harmony import */ var firebase_app__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(firebase_app__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _Message__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("Vqlu");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("wd/R");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("NWAQ");\n/* harmony import */ var _index_scss__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_index_scss__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _ant_design_icons__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("jhfD");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("bx4M");\n/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("Tckk");\n/* harmony import */ var _components__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("Kvkj");\n/* harmony import */ var react_router_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("Ty5D");\n/* harmony import */ var _apollo_react_hooks__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("ttZb");\n/* harmony import */ var _tools__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("Ueoi");\n/* harmony import */ var _shared__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("8rN0");\n\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_2___default()(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/* eslint-disable react/prop-types */\n\n\n\n\n\n\n\n\n\n\n\n\nmoment__WEBPACK_IMPORTED_MODULE_7___default()().format(); // const MY_USER_ID = \'tuinhune\'\n\nfunction MessageDetail(props) {\n  var _data$getUser, _data$getUser2;\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])(15),\n      _useState2 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState, 2),\n      showMore = _useState2[0],\n      setShowMore = _useState2[1];\n\n  var _useState3 = Object(react__WEBPACK_IMPORTED_MODULE_4__["useState"])([]),\n      _useState4 = _babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState3, 2),\n      messages = _useState4[0],\n      setMessages = _useState4[1];\n\n  var _props$match$params = props.match.params,\n      idChat = _props$match$params.idChat,\n      userId = _props$match$params.userId;\n\n  var _useContext = Object(react__WEBPACK_IMPORTED_MODULE_4__["useContext"])(_tools__WEBPACK_IMPORTED_MODULE_15__[/* IContext */ "c"]),\n      me = _useContext.me;\n\n  var ele = document.getElementsByClassName("message-list-container-phone ".concat(idChat))[0];\n  Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function () {\n    getMessages();\n    if (ele) ele.scrollTop = ele.scrollHeight;\n    document.getElementById("input-custom-".concat(idChat)).focus();\n  }, [ele]);\n  Object(react__WEBPACK_IMPORTED_MODULE_4__["useEffect"])(function () {\n    getMessages();\n  }, [showMore]);\n\n  var _useQuery = Object(_apollo_react_hooks__WEBPACK_IMPORTED_MODULE_14__[/* useQuery */ "b"])(_shared__WEBPACK_IMPORTED_MODULE_16__[/* GET_USER */ "n"], {\n    variables: {\n      userId: userId\n    }\n  }),\n      data = _useQuery.data;\n\n  var getMessages = function getMessages() {\n    firebase_app__WEBPACK_IMPORTED_MODULE_5__["database"]().ref("messenger/".concat(idChat, "/listmessages")).orderByKey().limitToLast(showMore).on(\'value\', function (snapshot) {\n      // var mess = (snapshot.val() && snapshot.val().mess1) || \'Anonymous\';\n      var temp = snapshot.val() ? Object.keys(snapshot.val()).map(function (key) {\n        return _objectSpread(_objectSpread({}, snapshot.val()[key]), {}, {\n          id: key\n        });\n      }) : []; // temp.sort((a, b) => a.timestamp - b.timestamp)\n\n      setMessages(temp);\n    });\n  };\n\n  var renderMessages = function renderMessages() {\n    var i = 0;\n    var messageCount = messages === null || messages === void 0 ? void 0 : messages.length;\n    var tempMessages = [];\n\n    while (i < messageCount) {\n      var previous = messages[i - 1];\n      var current = messages[i];\n      var next = messages[i + 1];\n      var isMine = current.author === (me === null || me === void 0 ? void 0 : me._id);\n      var currentMoment = moment__WEBPACK_IMPORTED_MODULE_7___default()(current.timestamp);\n      var prevBySameAuthor = false;\n      var nextBySameAuthor = false;\n      var startsSequence = true;\n      var endsSequence = true;\n      var showTimestamp = true;\n\n      if (previous) {\n        var previousMoment = moment__WEBPACK_IMPORTED_MODULE_7___default()(previous.timestamp);\n        var previousDuration = moment__WEBPACK_IMPORTED_MODULE_7___default.a.duration(currentMoment.diff(previousMoment));\n        prevBySameAuthor = previous.author === current.author;\n\n        if (prevBySameAuthor && previousDuration.as(\'hours\') < 1) {\n          startsSequence = false;\n        }\n\n        if (previousDuration.as(\'hours\') < 1) {\n          showTimestamp = false;\n        }\n      }\n\n      if (next) {\n        var nextMoment = moment__WEBPACK_IMPORTED_MODULE_7___default()(next.timestamp);\n        var nextDuration = moment__WEBPACK_IMPORTED_MODULE_7___default.a.duration(nextMoment.diff(currentMoment));\n        nextBySameAuthor = next.author === current.author;\n\n        if (nextBySameAuthor && nextDuration.as(\'hours\') < 1) {\n          endsSequence = false;\n        }\n      }\n\n      tempMessages.push( /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_Message__WEBPACK_IMPORTED_MODULE_6__["default"], {\n        idChat: idChat,\n        isLast: messageCount - 1 === i,\n        key: i,\n        isMine: isMine,\n        startsSequence: startsSequence,\n        endsSequence: endsSequence,\n        showTimestamp: showTimestamp,\n        data: current\n      })); // Proceed to the next message.\n\n      i += 1;\n    }\n\n    return tempMessages;\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(value, imgList) {\n      var message, ele;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              message = +new Date();\n              _context.next = 4;\n              return firebase_app__WEBPACK_IMPORTED_MODULE_5__["database"]().ref("messenger/".concat(idChat, "/listmessages/") + message).update({\n                content: {\n                  message: value,\n                  img: imgList\n                },\n                timestamp: +new Date(),\n                author: me === null || me === void 0 ? void 0 : me._id,\n                seen: false,\n                hideWith: []\n              });\n\n            case 4:\n              _context.next = 6;\n              return firebase_app__WEBPACK_IMPORTED_MODULE_5__["database"]().ref("messenger/".concat(idChat)).update({\n                lastMess: {\n                  content: {\n                    message: value,\n                    img: imgList\n                  },\n                  timestamp: +new Date(),\n                  author: me === null || me === void 0 ? void 0 : me._id,\n                  seen: false,\n                  hideWith: []\n                },\n                lastActivity: +new Date()\n              });\n\n            case 6:\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context["catch"](0);\n              console.log(_context.t0);\n\n            case 11:\n              ele = document.getElementsByClassName("message-list-container-phone ".concat(idChat))[0];\n              ele.scrollTop = ele.scrollHeight;\n\n            case 13:\n            case "end":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 8]]);\n    }));\n\n    return function handleSubmit(_x, _x2) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div", {\n    className: "message-list-phone"\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_10__[/* default */ "a"], {\n    title: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(react__WEBPACK_IMPORTED_MODULE_4___default.a.Fragment, null, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(antd__WEBPACK_IMPORTED_MODULE_11__[/* default */ "a"], {\n      onClick: function onClick() {\n        return props.history.push("/".concat(userId, "/info"));\n      },\n      src: data === null || data === void 0 ? void 0 : (_data$getUser = data.getUser) === null || _data$getUser === void 0 ? void 0 : _data$getUser.avatar\n    }), /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("a", {\n      onClick: function onClick() {\n        return props.history.push("/".concat(userId, "/info"));\n      },\n      style: {\n        marginLeft: 5\n      }\n    }, data === null || data === void 0 ? void 0 : (_data$getUser2 = data.getUser) === null || _data$getUser2 === void 0 ? void 0 : _data$getUser2.firstname)),\n    className: "ant-mess-phone",\n    extra: /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_ant_design_icons__WEBPACK_IMPORTED_MODULE_9__[/* default */ "a"], {\n      className: "delete-messbox",\n      onClick: function onClick() {\n        return props.history.goBack();\n      },\n      style: {\n        color: \'#ccc\',\n        fontSize: 20\n      }\n    }),\n    actions: [/*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement(_components__WEBPACK_IMPORTED_MODULE_12__[/* InputCustomize */ "i"], {\n      minRows: 1,\n      maxRows: 4,\n      idElement: idChat,\n      type: "chat",\n      onSubmit: handleSubmit,\n      placeholder: "Nh\\u1EADp tin nh\\u1EAFn",\n      key: "input"\n    })]\n  }, /*#__PURE__*/react__WEBPACK_IMPORTED_MODULE_4___default.a.createElement("div", {\n    className: "message-list-container-phone ".concat(idChat),\n    onScroll: function onScroll() {\n      var ele = document.getElementsByClassName("message-list-container-phone ".concat(idChat))[0];\n\n      if (showMore <= (messages === null || messages === void 0 ? void 0 : messages.length) && ele.scrollTop === 0) {\n        setShowMore(showMore + 3);\n        ele.scrollTop = 100;\n      }\n    }\n  }, renderMessages())));\n}\n\n/* harmony default export */ __webpack_exports__["default"] = (Object(react_router_dom__WEBPACK_IMPORTED_MODULE_13__[/* withRouter */ "h"])(MessageDetail));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ08rTi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9wYWdlcy9tZXNzYWdlRGV0YWlsL2luZGV4LmpzPzgwZWYiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVhY3QvcHJvcC10eXBlcyAqL1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZUNvbnRleHQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlL2FwcCdcbmltcG9ydCBNZXNzYWdlIGZyb20gJy4vTWVzc2FnZSdcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuaW1wb3J0ICcuL2luZGV4LnNjc3MnXG5pbXBvcnQgeyBBcnJvd0xlZnRPdXRsaW5lZCB9IGZyb20gJ0BhbnQtZGVzaWduL2ljb25zJ1xuaW1wb3J0IHsgQ2FyZCwgQXZhdGFyIH0gZnJvbSAnYW50ZCdcbmltcG9ydCB7IElucHV0Q3VzdG9taXplIH0gZnJvbSAnQGNvbXBvbmVudHMnXG5pbXBvcnQgeyB3aXRoUm91dGVyIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSdcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSAnQGFwb2xsby9yZWFjdC1ob29rcydcbmltcG9ydCB7IElDb250ZXh0IH0gZnJvbSAnQHRvb2xzJ1xuaW1wb3J0IHsgR0VUX1VTRVIgfSBmcm9tICdAc2hhcmVkJ1xubW9tZW50KCkuZm9ybWF0KClcbi8vIGNvbnN0IE1ZX1VTRVJfSUQgPSAndHVpbmh1bmUnXG5mdW5jdGlvbiBNZXNzYWdlRGV0YWlsKHByb3BzKSB7XG4gIGNvbnN0IFtzaG93TW9yZSwgc2V0U2hvd01vcmVdID0gdXNlU3RhdGUoMTUpXG4gIGNvbnN0IFttZXNzYWdlcywgc2V0TWVzc2FnZXNdID0gdXNlU3RhdGUoW10pXG4gIGNvbnN0IHsgaWRDaGF0LCB1c2VySWQgfSA9IHByb3BzLm1hdGNoLnBhcmFtc1xuICBjb25zdCB7IG1lIH0gPSB1c2VDb250ZXh0KElDb250ZXh0KVxuICBjb25zdCBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgIGBtZXNzYWdlLWxpc3QtY29udGFpbmVyLXBob25lICR7aWRDaGF0fWBcbiAgKVswXVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGdldE1lc3NhZ2VzKClcbiAgICBpZiAoZWxlKSBlbGUuc2Nyb2xsVG9wID0gZWxlLnNjcm9sbEhlaWdodFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGBpbnB1dC1jdXN0b20tJHtpZENoYXR9YCkuZm9jdXMoKVxuICB9LCBbZWxlXSlcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBnZXRNZXNzYWdlcygpXG4gIH0sIFtzaG93TW9yZV0pXG4gIGNvbnN0IHsgZGF0YSB9ID0gdXNlUXVlcnkoR0VUX1VTRVIsIHsgdmFyaWFibGVzOiB7IHVzZXJJZCB9IH0pXG4gIGNvbnN0IGdldE1lc3NhZ2VzID0gKCkgPT4ge1xuICAgIGZpcmViYXNlXG4gICAgICAuZGF0YWJhc2UoKVxuICAgICAgLnJlZihgbWVzc2VuZ2VyLyR7aWRDaGF0fS9saXN0bWVzc2FnZXNgKVxuICAgICAgLm9yZGVyQnlLZXkoKVxuICAgICAgLmxpbWl0VG9MYXN0KHNob3dNb3JlKVxuICAgICAgLm9uKCd2YWx1ZScsIHNuYXBzaG90ID0+IHtcbiAgICAgICAgLy8gdmFyIG1lc3MgPSAoc25hcHNob3QudmFsKCkgJiYgc25hcHNob3QudmFsKCkubWVzczEpIHx8ICdBbm9ueW1vdXMnO1xuICAgICAgICBjb25zdCB0ZW1wID0gc25hcHNob3QudmFsKClcbiAgICAgICAgICA/IE9iamVjdC5rZXlzKHNuYXBzaG90LnZhbCgpKS5tYXAoa2V5ID0+ICh7XG4gICAgICAgICAgICAgIC4uLnNuYXBzaG90LnZhbCgpW2tleV0sXG4gICAgICAgICAgICAgIGlkOiBrZXlcbiAgICAgICAgICAgIH0pKVxuICAgICAgICAgIDogW11cbiAgICAgICAgLy8gdGVtcC5zb3J0KChhLCBiKSA9PiBhLnRpbWVzdGFtcCAtIGIudGltZXN0YW1wKVxuICAgICAgICBzZXRNZXNzYWdlcyh0ZW1wKVxuICAgICAgfSlcbiAgfVxuXG4gIGNvbnN0IHJlbmRlck1lc3NhZ2VzID0gKCkgPT4ge1xuICAgIGxldCBpID0gMFxuICAgIGNvbnN0IG1lc3NhZ2VDb3VudCA9IG1lc3NhZ2VzPy5sZW5ndGhcbiAgICBjb25zdCB0ZW1wTWVzc2FnZXMgPSBbXVxuXG4gICAgd2hpbGUgKGkgPCBtZXNzYWdlQ291bnQpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzID0gbWVzc2FnZXNbaSAtIDFdXG4gICAgICBjb25zdCBjdXJyZW50ID0gbWVzc2FnZXNbaV1cbiAgICAgIGNvbnN0IG5leHQgPSBtZXNzYWdlc1tpICsgMV1cbiAgICAgIGNvbnN0IGlzTWluZSA9IGN1cnJlbnQuYXV0aG9yID09PSBtZT8uX2lkXG4gICAgICBjb25zdCBjdXJyZW50TW9tZW50ID0gbW9tZW50KGN1cnJlbnQudGltZXN0YW1wKVxuICAgICAgbGV0IHByZXZCeVNhbWVBdXRob3IgPSBmYWxzZVxuICAgICAgbGV0IG5leHRCeVNhbWVBdXRob3IgPSBmYWxzZVxuICAgICAgbGV0IHN0YXJ0c1NlcXVlbmNlID0gdHJ1ZVxuICAgICAgbGV0IGVuZHNTZXF1ZW5jZSA9IHRydWVcbiAgICAgIGxldCBzaG93VGltZXN0YW1wID0gdHJ1ZVxuXG4gICAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgICAgY29uc3QgcHJldmlvdXNNb21lbnQgPSBtb21lbnQocHJldmlvdXMudGltZXN0YW1wKVxuICAgICAgICBjb25zdCBwcmV2aW91c0R1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKFxuICAgICAgICAgIGN1cnJlbnRNb21lbnQuZGlmZihwcmV2aW91c01vbWVudClcbiAgICAgICAgKVxuICAgICAgICBwcmV2QnlTYW1lQXV0aG9yID0gcHJldmlvdXMuYXV0aG9yID09PSBjdXJyZW50LmF1dGhvclxuXG4gICAgICAgIGlmIChwcmV2QnlTYW1lQXV0aG9yICYmIHByZXZpb3VzRHVyYXRpb24uYXMoJ2hvdXJzJykgPCAxKSB7XG4gICAgICAgICAgc3RhcnRzU2VxdWVuY2UgPSBmYWxzZVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZpb3VzRHVyYXRpb24uYXMoJ2hvdXJzJykgPCAxKSB7XG4gICAgICAgICAgc2hvd1RpbWVzdGFtcCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKG5leHQpIHtcbiAgICAgICAgY29uc3QgbmV4dE1vbWVudCA9IG1vbWVudChuZXh0LnRpbWVzdGFtcClcbiAgICAgICAgY29uc3QgbmV4dER1cmF0aW9uID0gbW9tZW50LmR1cmF0aW9uKG5leHRNb21lbnQuZGlmZihjdXJyZW50TW9tZW50KSlcbiAgICAgICAgbmV4dEJ5U2FtZUF1dGhvciA9IG5leHQuYXV0aG9yID09PSBjdXJyZW50LmF1dGhvclxuXG4gICAgICAgIGlmIChuZXh0QnlTYW1lQXV0aG9yICYmIG5leHREdXJhdGlvbi5hcygnaG91cnMnKSA8IDEpIHtcbiAgICAgICAgICBlbmRzU2VxdWVuY2UgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRlbXBNZXNzYWdlcy5wdXNoKFxuICAgICAgICA8TWVzc2FnZVxuICAgICAgICAgIGlkQ2hhdD17aWRDaGF0fVxuICAgICAgICAgIGlzTGFzdD17bWVzc2FnZUNvdW50IC0gMSA9PT0gaX1cbiAgICAgICAgICBrZXk9e2l9XG4gICAgICAgICAgaXNNaW5lPXtpc01pbmV9XG4gICAgICAgICAgc3RhcnRzU2VxdWVuY2U9e3N0YXJ0c1NlcXVlbmNlfVxuICAgICAgICAgIGVuZHNTZXF1ZW5jZT17ZW5kc1NlcXVlbmNlfVxuICAgICAgICAgIHNob3dUaW1lc3RhbXA9e3Nob3dUaW1lc3RhbXB9XG4gICAgICAgICAgZGF0YT17Y3VycmVudH1cbiAgICAgICAgLz5cbiAgICAgIClcblxuICAgICAgLy8gUHJvY2VlZCB0byB0aGUgbmV4dCBtZXNzYWdlLlxuICAgICAgaSArPSAxXG4gICAgfVxuICAgIHJldHVybiB0ZW1wTWVzc2FnZXNcbiAgfVxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSBhc3luYyAodmFsdWUsIGltZ0xpc3QpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9ICtuZXcgRGF0ZSgpXG4gICAgICBhd2FpdCBmaXJlYmFzZVxuICAgICAgICAuZGF0YWJhc2UoKVxuICAgICAgICAucmVmKGBtZXNzZW5nZXIvJHtpZENoYXR9L2xpc3RtZXNzYWdlcy9gICsgbWVzc2FnZSlcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgY29udGVudDogeyBtZXNzYWdlOiB2YWx1ZSwgaW1nOiBpbWdMaXN0IH0sXG4gICAgICAgICAgdGltZXN0YW1wOiArbmV3IERhdGUoKSxcbiAgICAgICAgICBhdXRob3I6IG1lPy5faWQsXG4gICAgICAgICAgc2VlbjogZmFsc2UsXG4gICAgICAgICAgaGlkZVdpdGg6IFtdXG4gICAgICAgIH0pXG4gICAgICBhd2FpdCBmaXJlYmFzZVxuICAgICAgICAuZGF0YWJhc2UoKVxuICAgICAgICAucmVmKGBtZXNzZW5nZXIvJHtpZENoYXR9YClcbiAgICAgICAgLnVwZGF0ZSh7XG4gICAgICAgICAgbGFzdE1lc3M6IHtcbiAgICAgICAgICAgIGNvbnRlbnQ6IHsgbWVzc2FnZTogdmFsdWUsIGltZzogaW1nTGlzdCB9LFxuICAgICAgICAgICAgdGltZXN0YW1wOiArbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGF1dGhvcjogbWU/Ll9pZCxcbiAgICAgICAgICAgIHNlZW46IGZhbHNlLFxuICAgICAgICAgICAgaGlkZVdpdGg6IFtdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsYXN0QWN0aXZpdHk6ICtuZXcgRGF0ZSgpXG4gICAgICAgIH0pXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKVxuICAgIH1cbiAgICBjb25zdCBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgYG1lc3NhZ2UtbGlzdC1jb250YWluZXItcGhvbmUgJHtpZENoYXR9YFxuICAgIClbMF1cbiAgICBlbGUuc2Nyb2xsVG9wID0gZWxlLnNjcm9sbEhlaWdodFxuICB9XG5cbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cIm1lc3NhZ2UtbGlzdC1waG9uZVwiPlxuICAgICAgPENhcmRcbiAgICAgICAgdGl0bGU9e1xuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8QXZhdGFyXG4gICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHByb3BzLmhpc3RvcnkucHVzaChgLyR7dXNlcklkfS9pbmZvYCl9XG4gICAgICAgICAgICAgIHNyYz17ZGF0YT8uZ2V0VXNlcj8uYXZhdGFyfVxuICAgICAgICAgICAgPjwvQXZhdGFyPlxuICAgICAgICAgICAgPGFcbiAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcHJvcHMuaGlzdG9yeS5wdXNoKGAvJHt1c2VySWR9L2luZm9gKX1cbiAgICAgICAgICAgICAgc3R5bGU9e3sgbWFyZ2luTGVmdDogNSB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7ZGF0YT8uZ2V0VXNlcj8uZmlyc3RuYW1lfVxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvPlxuICAgICAgICB9XG4gICAgICAgIGNsYXNzTmFtZT1cImFudC1tZXNzLXBob25lXCJcbiAgICAgICAgZXh0cmE9e1xuICAgICAgICAgIDxBcnJvd0xlZnRPdXRsaW5lZFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwiZGVsZXRlLW1lc3Nib3hcIlxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gcHJvcHMuaGlzdG9yeS5nb0JhY2soKX1cbiAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiAnI2NjYycsIGZvbnRTaXplOiAyMCB9fVxuICAgICAgICAgIC8+XG4gICAgICAgIH1cbiAgICAgICAgYWN0aW9ucz17W1xuICAgICAgICAgIDxJbnB1dEN1c3RvbWl6ZVxuICAgICAgICAgICAgbWluUm93cz17MX1cbiAgICAgICAgICAgIG1heFJvd3M9ezR9XG4gICAgICAgICAgICBpZEVsZW1lbnQ9e2lkQ2hhdH1cbiAgICAgICAgICAgIHR5cGU9XCJjaGF0XCJcbiAgICAgICAgICAgIG9uU3VibWl0PXtoYW5kbGVTdWJtaXR9XG4gICAgICAgICAgICBwbGFjZWhvbGRlcj1cIk5o4bqtcCB0aW4gbmjhuq9uXCJcbiAgICAgICAgICAgIGtleT1cImlucHV0XCJcbiAgICAgICAgICAvPlxuICAgICAgICBdfVxuICAgICAgPlxuICAgICAgICA8ZGl2XG4gICAgICAgICAgY2xhc3NOYW1lPXtgbWVzc2FnZS1saXN0LWNvbnRhaW5lci1waG9uZSAke2lkQ2hhdH1gfVxuICAgICAgICAgIG9uU2Nyb2xsPXsoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGUgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFxuICAgICAgICAgICAgICBgbWVzc2FnZS1saXN0LWNvbnRhaW5lci1waG9uZSAke2lkQ2hhdH1gXG4gICAgICAgICAgICApWzBdXG4gICAgICAgICAgICBpZiAoc2hvd01vcmUgPD0gbWVzc2FnZXM/Lmxlbmd0aCAmJiBlbGUuc2Nyb2xsVG9wID09PSAwKSB7XG4gICAgICAgICAgICAgIHNldFNob3dNb3JlKHNob3dNb3JlICsgMylcbiAgICAgICAgICAgICAgZWxlLnNjcm9sbFRvcCA9IDEwMFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICB7cmVuZGVyTWVzc2FnZXMoKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L0NhcmQ+XG4gICAgPC9kaXY+XG4gIClcbn1cbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoTWVzc2FnZURldGFpbClcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUNBO0FBSUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFnQkE7QUFBQTtBQUFBO0FBQUE7QUFoQkE7QUFDQTtBQWdCQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBRUE7QUFGQTtBQUFBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQUNBO0FBWUE7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBRkE7QUFBQTtBQU9BO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQUNBO0FBUEE7QUFBQTtBQUFBO0FBaUJBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFSQTtBQUNBO0FBakJBO0FBQUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUFBO0FBMkJBO0FBQ0E7QUE1QkE7QUE2QkE7QUFHQTtBQUNBO0FBakNBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFEQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBa0NBO0FBQ0E7QUFBQTtBQUVBO0FBR0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUtBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUZBO0FBUUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFIQTtBQU1BO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFQQTtBQXhCQTtBQW9DQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFWQTtBQWlCQTtBQUNBO0FBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///gO+N\n')}}]);